<!--  https://github.com/mroughan/AlephZeroHeroesData/blob/master/Code/Hugo/csv_table.html -->
<!-- https://aleph-zero-heroes.info/posts/post_hugo_1/ -->
{{ if .Get "maxLines"}}
   {{ $.Scratch.Set "maxLines" (.Get "maxLines" | int)  }}
{{ else }}
   {{ $.Scratch.Set "maxLines" 1000 }}
{{ end }}

{{ if .Get "colStyle"}}
   {{ $.Scratch.Set "colStyle" (.Get "colStyle")  }}
{{ else }}
   {{ $.Scratch.Set "colStyle" "" }}
{{ end }}

{{ $data := dict }}
{{ $arg := .Get 0 }}
{{ with resources.Get $arg }}
  {{ $opts := dict "delimiter" "," }}
  {{ $data = . | transform.Unmarshal $opts }}
{{ else }}
  {{ errorf "Unable3 to get resource %q" $arg }}
{{ end }}

<table>
  {{ range $i, $r := (first 1 $data) }} 
    <thead><tr>
       {{ range $j, $s := $r}}
        <th style="text-align:left;">{{ humanize $s }}</th>
       {{ end }}
    </tr> </thead>
    {{ end }}
    {{ range $i, $r := (first ($.Scratch.Get "maxLines") (after 1 $data)) }}
       <tr>
       {{ range $j, $s := $r}}
          <td style="{{ $.Scratch.Get "colStyle" | safeCSS }}"> {{ $s }} </td>
       {{ end }}
       </tr>
    {{ end }}
</table>
